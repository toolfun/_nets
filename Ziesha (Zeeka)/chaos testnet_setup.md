# 🛑 guide is for old testnet and not relevant any more

> ❣️ *The first phase of the Chaos Testnet finished 28.10.2022, gracefully terminated at block 5000*    
> ❣️ *The next phase of our testnet is scheduled to start on Monday 21st November*    
    
    
## Zeeka Miner Setup

> *The height limit is currently set to: 5000 blocks.* Chaos Testnet started on 20.10.2022

## We have to install 3 elements of mining
### 1. Bazuka
**Prepare**
```
sudo apt-get update && sudo apt-get upgrade
```
```
sudo apt install -y build-essential libssl-dev cmake ocl-icd-opencl-dev -y
```
**Install Rust**

```
sudo curl https://sh.rustup.rs -sSf | sh -s -- -y
```
```
source "$HOME/.cargo/env"
```

**Clone bazuka repo and install**
```
cd
git clone https://github.com/zeeka-network/bazuka
cd bazuka
cargo install --path .
```

**Init bazuka node**
```
bazuka init --seed "your seed phrase" --network chaos --node 127.0.0.1:8765
```
:exclamation: The seed is a random ***unique*** string of characters, not mnemonic phrases. You do not need to generate it using wallets! (E.g Metamask) The longer the seed is, the safer. We suggest a seed string of at least **80 random characters.** Your regular and zero-knowledge private-keys are derived from the `--seed` value, so don't forget to **keep them somewhere safe and do not share it!**

> In case you want to re-init. Remove `.bazuka.yaml`
> ```
> rm ~/.bazuka.yaml
> ```
> Then init again as it shown above

**Create service file for bazuka.** Replace ***YOUR.SERVER.IP.ADDR*** with your server IP address
```
sudo tee <<EOF >/dev/null /etc/systemd/system/bazuka.service
[Unit]
Description=Bazuka node
After=network.target

[Service]
User=root
ExecStart=/root/.cargo/bin/bazuka node \
 --listen 0.0.0.0:8765 \
 --external YOUR.SERVER.IP.ADDR:8765 \
 --network chaos \
 --db ~/.bazuka-chaos \
 --discord-handle "roguelin#2113" \
 --bootstrap 34.132.176.19:8765
Restart=on-failure
RestartSec=3
LimitNOFILE=65535

[Install]
WantedBy=multi-user.target
EOF
```
```
sudo systemctl daemon-reload
sudo systemctl enable bazuka
sudo systemctl restart bazuka
```
**Bazuka logs**
```
journalctl -u bazuka -f -o cat
```

### 2.Zoro - the MPN executor
> Mining on GPU require GPU drivers is installed. You also have to install ocl-icd-opencl-dev! (Currently, only NVIDIA GPUs are supported)

**Install zoro**
```
cd
git clone https://github.com/zeeka-network/zoro
cd zoro
cargo install --path .
```
**Download parameters**    
> **Create dir for params**    
```
mkdir ~/zoro_params
```
- **Payment parameters (~700MB):**
```
wget http://46.101.183.146/payment_params.dat -O ~/zoro_params/payment_params.dat
```
- **Update parameters (~6GB):**
```
wget http://46.101.183.146/update_params.dat -O ~/zoro_params/update_params.dat
```
**Create service file for zoro.** Paste yor own seed for zoro.    
> ***NB!*** The seed phrase for the zoro needs to be **different** from the seed you use for your bazuka node.    
:exclamation: Remoove last backslash `\` and `--gpu` flag in a service file, if you'll **not** mine on a GPU
```
sudo tee <<EOF >/dev/null /etc/systemd/system/zoro.service
[Unit]
Description=Zoro miner
After=network.target

[Service]
User=root
ExecStart=/root/.cargo/bin/zoro --node 127.0.0.1:8765 --seed "juice ring hint street monkey baby guilt powder edge two shell ordinary owner tackle crouch detail tuna round domain parade legend achieve hip various" \
 --network chaos \
 --update-circuit-params /root/zoro_params/update_params.dat \
 --payment-circuit-params /root/zoro_params/payment_params.dat \
 --db ~/.bazuka-chaos \
 --gpu
Restart=on-failure
RestartSec=3
LimitNOFILE=65535

[Install]
WantedBy=multi-user.target
EOF
```    

### 3. Uzi-miner
After a new block is generated by *zoro*, the *uzi-miner* should start working on the PoW puzzle, so we have to install it
```
cd
git clone https://github.com/zeeka-network/uzi-miner
cd uzi-miner
cargo install --path .
```
**Create service file for uzi-miner**
```
sudo tee <<EOF >/dev/null /etc/systemd/system/uzi-miner.service
[Unit]
Description=Uzi-miner
After=network.target

[Service]
User=root
ExecStart=/root/.cargo/bin/uzi-miner --node 127.0.0.1:8765 --threads 24
Restart=on-failure
RestartSec=3
LimitNOFILE=65535

[Install]
WantedBy=multi-user.target
EOF
```
> ***NB!*** Change number of `--threads` based on the spec of your system    

**Enable services and start mining**
```
sudo systemctl daemon-reload
sudo systemctl enable zoro uzi-miner
sudo systemctl restart zoro uzi-miner
```
```
journalctl -u zoro -u uzi-miner -f -o cat
```


